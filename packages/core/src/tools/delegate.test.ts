/**
 * Tests for the delegate tool
 * Generated by polka.codes
 */

import { describe, expect, test } from 'bun:test'
import { ToolResponseType } from '../tool'
import { handler, toolInfo } from './delegate'

describe('delegate tool', () => {
  test('tool info should be properly defined', () => {
    expect(toolInfo.name).toBe('delegate')
    expect(toolInfo.parameters).toHaveLength(4)
    expect(toolInfo.examples).toHaveLength(1)
  })

  test('handler should return proper delegate response', async () => {
    const result = await handler(
      {},
      {
        agent_name: 'analyzer',
        task: 'analyze code',
        context: 'test context',
        files: 'file1.ts,file2.ts',
      },
    )

    expect(result).toEqual({
      type: ToolResponseType.Delegate,
      agentName: 'analyzer',
      task: 'analyze code',
      context: 'test context',
      files: ['file1.ts', 'file2.ts'],
    })
  })

  test('handler should throw error if required parameters are missing', async () => {
    await expect(handler({}, {})).rejects.toThrow()
  })
})
