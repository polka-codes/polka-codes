/**
 * Tests for generateProjectConfig AiTool
 * Generated by polka.codes
 */

import { describe, expect, test } from 'bun:test'
import generateProjectConfig from './generateProjectConfig'

describe('generateProjectConfig', () => {
  test('should format input correctly', () => {
    const files = ['package.json', '.polkacodes.yml']

    const input = generateProjectConfig.formatInput(files)
    expect(input).toBe('package.json,.polkacodes.yml')
  })

  test('should parse output correctly', () => {
    const output = `scripts:
  test:
    command: "bun test"
    description: "Run tests"

rules:
  - "Use bun as package manager"`

    const result = generateProjectConfig.parseOutput(output)
    expect(result).toBe(output)
  })

  test('should handle empty files array', () => {
    const files: string[] = []
    const input = generateProjectConfig.formatInput(files)
    expect(input).toBe('')
  })

  test('should trim whitespace in output', () => {
    const output = `
scripts:
  test:
    command: "bun test"
    description: "Run tests"

rules:
  - "Use bun as package manager"
    `

    const result = generateProjectConfig.parseOutput(output)
    expect(result).toBe(output.trim())
  })
})
