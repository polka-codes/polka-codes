// Bun Snapshot v1, https://goo.gl/fbAQLP

exports[`TruncateContextPolicy should truncate messages when over threshold 1`] = `
[
  {
    "content": "User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1User message 1",
    "role": "user",
  },
  {
    "content": "Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1Assistant message 1",
    "role": "assistant",
  },
  {
    "content": "User message 2",
    "role": "user",
  },
  {
    "content": "Assistant message 2",
    "role": "assistant",
  },
  {
    "content": "User message 3",
    "role": "user",
  },
  {
    "content": "Assistant message 3",
    "role": "assistant",
  },
]
`;

exports[`TruncateContextPolicy should preserve recent exchanges 1`] = `
[
  {
    "content": "Note: 4 earlier messages were truncated to prevent context overflow.",
    "role": "user",
  },
  {
    "content": "Recent user message 1",
    "role": "user",
  },
  {
    "content": "Recent assistant message 1",
    "role": "assistant",
  },
  {
    "content": "Recent user message 2",
    "role": "user",
  },
  {
    "content": "Recent assistant message 2",
    "role": "assistant",
  },
  {
    "content": "Most recent user message",
    "role": "user",
  },
  {
    "content": "Most recent assistant message",
    "role": "assistant",
  },
]
`;
