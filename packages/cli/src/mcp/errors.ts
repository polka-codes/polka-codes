// generated by polka.codes

/**
 * Base class for MCP-specific errors
 */
export abstract class McpError extends Error {
  public readonly serverName: string
  public readonly retryable: boolean

  constructor(serverName: string, message: string, retryable: boolean) {
    super(message)
    this.name = this.constructor.name
    this.serverName = serverName
    this.retryable = retryable
  }
}

/**
 * Error when MCP server fails to start or connect
 */
export class McpConnectionError extends McpError {
  constructor(
    serverName: string,
    public readonly cause?: Error,
  ) {
    super(
      serverName,
      `Failed to connect to MCP server '${serverName}'. Please check the server configuration and ensure it is available.`,
      false,
    )
  }
}

/**
 * Error when MCP server times out
 */
export class McpTimeoutError extends McpError {
  constructor(
    serverName: string,
    public readonly timeoutSeconds: number,
  ) {
    super(serverName, `MCP server '${serverName}' timed out after ${timeoutSeconds} seconds. The server may be slow or unresponsive.`, true)
  }
}

/**
 * Error when MCP protocol is violated
 */
export class McpProtocolError extends McpError {
  constructor(serverName: string, message: string) {
    super(serverName, `MCP protocol error with server '${serverName}': ${message}`, false)
  }
}

/**
 * Error when MCP tool call fails
 */
export class McpToolError extends McpError {
  constructor(
    serverName: string,
    public readonly toolName: string,
    message: string,
    public readonly cause?: Error,
  ) {
    super(serverName, `Tool '${toolName}' on server '${serverName}' failed: ${message}`, false)
  }
}

/**
 * Error when MCP server is not found
 */
export class McpServerError extends McpError {
  constructor(serverName: string) {
    super(serverName, `MCP server '${serverName}' not found in configuration.`, false)
  }
}
