// generated by polka.codes
import { describe, expect, it } from 'bun:test'
import { AiProvider, getModel } from './getModel'

describe('getModel', () => {
  it('should create Anthropic model', () => {
    const model = getModel({
      provider: AiProvider.Anthropic,
      model: 'claude-3-5-sonnet-20241022',
      apiKey: 'test-key',
    })

    expect(model).toBeDefined()
    expect(model.modelId).toBe('claude-3-5-sonnet-20241022')
  })

  it('should create Ollama model', () => {
    const model = getModel({
      provider: AiProvider.Ollama,
      model: 'llama3.2',
      baseUrl: 'http://localhost:11434',
    })

    expect(model).toBeDefined()
  })

  it('should create OpenAI model', () => {
    const model = getModel({
      provider: AiProvider.OpenAI,
      model: 'gpt-4',
      apiKey: 'test-key',
    })

    expect(model).toBeDefined()
    expect(model.modelId).toBe('gpt-4')
  })

  it('should create Google model', () => {
    const model = getModel({
      provider: AiProvider.Google,
      model: 'gemini-2.0-flash-exp',
      apiKey: 'test-key',
    })

    expect(model).toBeDefined()
  })

  it('should create Google Vertex model', () => {
    const model = getModel({
      provider: AiProvider.GoogleVertex,
      model: 'gemini-2.0-flash-exp',
      project: 'test-project',
      location: 'us-central1',
    })

    expect(model).toBeDefined()
  })

  it('should create DeepSeek model', () => {
    const model = getModel({
      provider: AiProvider.DeepSeek,
      model: 'deepseek-chat',
      apiKey: 'test-key',
    })

    expect(model).toBeDefined()
  })

  it('should create OpenRouter model', () => {
    const model = getModel({
      provider: AiProvider.OpenRouter,
      model: 'anthropic/claude-3.5-sonnet',
      apiKey: 'test-key',
    })

    expect(model).toBeDefined()
  })

  it('should create OpenAI-compatible model', () => {
    const model = getModel({
      provider: AiProvider.OpenAICompatible,
      model: 'gpt-4o',
      apiKey: 'test-key',
      baseUrl: 'https://api.together.xyz/v1',
    })

    expect(model).toBeDefined()
    expect(model.modelId).toBe('gpt-4o')
  })
})
